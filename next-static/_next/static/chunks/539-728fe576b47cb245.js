"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{84872:function(e,r,n){n.d(r,{B:function(){return p},h:function(){return g}});var t,i=n(91472),u=n(57389),o=n(72006),a=n(4405),c=n(73258),l=n(42954),f={SERVICE_LOADED:"login/service_loaded",EMAIL_SET:"login/email/set",EMAIL_PREFILL_SET:"login/email_prefill/set",MISTYPED_EMAIL_DATA_SET:"login/mistyped_email_data/set",POST_LOGIN_REDIRECT_URL_SET:"login/post_login_redirect_url/set"},p={serviceLoaded:(0,c.PH)(f.SERVICE_LOADED),setEmail:(0,c.PH)(f.EMAIL_SET),setEmailPrefill:(0,c.PH)(f.EMAIL_PREFILL_SET),setMistypedEmailData:(0,c.PH)(f.MISTYPED_EMAIL_DATA_SET),setPostLoginRedirectUrl:(0,c.PH)(f.POST_LOGIN_REDIRECT_URL_SET)},s=l.Z.extract("login"),E=(0,o.Z)({email:null,emailPrefill:null,mistypedEmailData:null,postLoginRedirectUrl:null,teamName:null},s),d=(0,c.jZ)((t={},(0,u.Z)(t,f.EMAIL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{email:n.email})}),(0,u.Z)(t,f.EMAIL_PREFILL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{emailPrefill:n.email,teamName:n.teamName})}),(0,u.Z)(t,f.MISTYPED_EMAIL_DATA_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{mistypedEmailData:n})}),(0,u.Z)(t,f.POST_LOGIN_REDIRECT_URL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{postLoginRedirectUrl:n.url})}),t),E),g={getEmail:function(e){return e.login.email},getEmailPrefill:function(e){return e.login.emailPrefill},getMistypedEmailData:function(e){return e.login.mistypedEmailData},getTeamName:function(e){return e.login.teamName},getPostLoginRedirectUrl:function(e){return e.login.postLoginRedirectUrl}},T=n(37872),_=n(5573),m=n(85767),R=n(64999),P=n(25570),S=n(73152),y=n(34758),I=n(90049),A=n(22609),h=n(78807),v=n(78723),Z=function(){return(0,v.Tl)(A.Z.getItem("login"))},L=function(e){return A.Z.setItem("login",JSON.stringify(e))},U=function(e){return Z()[e]},w=function(e,r){return L((0,a.Z)((0,o.Z)({},Z()),(0,u.Z)({},e,r)))},D=function(e){var r=Z();delete r[e],L(r)},C=function(e){return e.ofType(f.EMAIL_SET).pipe((0,_.j)("payload","email"),(0,m.b)(function(e){return w("email",e)}),(0,R.l)())},b=function(e){return e.pipe((0,P.P)(),(0,S.U)(function(){return U("email")}),(0,y.h)(function(e){return e}),(0,S.U)(function(e){return p.setEmail({email:e})}))},k=function(e,r){return(0,T.T)(e.pipe((0,P.P)()),e.ofType(h.cw.USER_AUTH_UPDATED)).pipe((0,y.h)(function(){return h.py.isAuth(r.value)}),(0,y.h)(function(){return U("email")}),(0,m.b)(function(){return D("email")}),(0,R.l)())},F=function(e,r){return e.pipe((0,P.P)(),(0,y.h)(function(){return!h.py.isAuth(r.value)}),(0,S.U)(function(){return(0,v.pm)("login_redirect")}),(0,y.h)(function(e){return e&&e.startsWith(I.jQg)}),(0,S.U)(function(e){return p.setPostLoginRedirectUrl({url:e})}))},G=function(e){return e.ofType(f.POST_LOGIN_REDIRECT_URL_SET).pipe((0,_.j)("payload","url"),(0,m.b)(function(e){return w("postLoginRedirectUrl",e)}),(0,R.l)())},O=(0,i.Q0)(C,b,k,F,G);(0,i.oe)(O),(0,i.fn)("login",d),(0,i.WI)(p.serviceLoaded())},43570:function(e,r,n){n.d(r,{FA:function(){return s},Oh:function(){return R},xd:function(){return eg}});var t,i=n(91472),u=n(57389),o=n(72006),a=n(4405),c=n(73258),l=n(23232),f=n(42954),p={SERVICE_LOADED:"signup/service_loaded",EMAIL_SET:"signup/email/set",EMAIL_PREFILL_SET:"signup/email_prefill/set",MISTYPED_EMAIL_DATA_SET:"signup/mistyped_email_data/set",REFERRER_SET:"signup/referrer/set",REFERRER_CLICK:"signup/referrer/click",REFERRER_TYPE_SET:"signup/referrer_type/set",PARTNER_SET:"signup/partner/set",PARTNER_CLICK:"signup/partner/click",AFFILIATE_TRACKING_ID_SET:"signup/affiliate_tracking_id/set",POST_SIGNUP_REDIRECT_URL_SET:"signup/post_signup_redirect_url/set",WAS_BROADCAST_GUEST_SET:"signup/was_broadcast_guest/set"},s={serviceLoaded:(0,c.PH)(p.SERVICE_LOADED),setEmail:(0,c.PH)(p.EMAIL_SET),setEmailPrefill:(0,c.PH)(p.EMAIL_PREFILL_SET),setMistypedEmailData:(0,c.PH)(p.MISTYPED_EMAIL_DATA_SET),setReferrer:(0,c.PH)(p.REFERRER_SET),setReferrerType:(0,c.PH)(p.REFERRER_TYPE_SET),referrerClick:(0,c.PH)(p.REFERRER_CLICK),setPartner:(0,c.PH)(p.PARTNER_SET),partnerClick:(0,c.PH)(p.PARTNER_CLICK),setAffiliateTrackingId:(0,c.PH)(p.AFFILIATE_TRACKING_ID_SET),setPostSignupRedirectUrl:(0,c.PH)(p.POST_SIGNUP_REDIRECT_URL_SET),setWasBroadcastGuest:(0,c.PH)(p.WAS_BROADCAST_GUEST_SET)},E=f.Z.extract("signup"),d=(0,o.Z)({email:null,emailPrefill:null,mistypedEmailData:null,referrer:null,partner:null,referrerType:null,affiliateTrackingId:null,postSignupRedirectUrl:null,wasBroadcastGuest:!1,teamName:null},E),g=(0,c.jZ)((t={},(0,u.Z)(t,p.EMAIL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{email:n.email})}),(0,u.Z)(t,p.EMAIL_PREFILL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{emailPrefill:n.email,teamName:n.teamName})}),(0,u.Z)(t,p.MISTYPED_EMAIL_DATA_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{mistypedEmailData:n})}),(0,u.Z)(t,p.REFERRER_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{referrer:n.referrer})}),(0,u.Z)(t,p.REFERRER_TYPE_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{referrerType:n.referrerType})}),(0,u.Z)(t,p.PARTNER_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{partner:n.partner})}),(0,u.Z)(t,p.AFFILIATE_TRACKING_ID_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{affiliateTrackingId:n.id})}),(0,u.Z)(t,p.POST_SIGNUP_REDIRECT_URL_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{postSignupRedirectUrl:n.url})}),(0,u.Z)(t,p.WAS_BROADCAST_GUEST_SET,function(e,r){var n=r.payload;return(0,a.Z)((0,o.Z)({},e),{wasBroadcastGuest:n.wasBroadcastGuest})}),t),d),T=function(e){return e.signup.partner},_=function(e){return e.signup.referrer},m=function(e){return e.signup.affiliateTrackingId},R={getEmail:function(e){return e.signup.email},getEmailPrefill:function(e){return e.signup.emailPrefill},getMistypedEmailData:function(e){return e.signup.mistypedEmailData},getTeamName:function(e){return e.signup.teamName},getReferrer:(0,l.P1)(T,_,function(e,r){return e?null:r}),getReferrerRaw:_,getReferrerType:function(e){return e.signup.referrerType},getPartner:T,getAffiliateTrackingId:(0,l.P1)(T,_,m,function(e,r,n){return e||r?null:n}),getAffiliateTrackingIdRaw:m,getPostSignupRedirectUrl:function(e){return e.signup.postSignupRedirectUrl},wasBroadcastGuest:function(e){return e.signup.wasBroadcastGuest}},P=n(37872),S=n(22376),y=n(50761),I=n(74653),A=n(41440),h=n(5573),v=n(85767),Z=n(64999),L=n(25570),U=n(73152),w=n(34758),D=n(61945),C=n(72044),b=n(71059),k=n(84824),F=n(25171),G=n(4522),O=n.n(G),N=n(90049),M=n(1758),x=n(22609),j=n(82218),B=n(96130),H=n(78807),K=n(78723),W=function(){return(0,K.Tl)(x.Z.getItem("signup"))},Y=function(e){return x.Z.setItem("signup",JSON.stringify(e))},V=function(e){return W()[e]},q=function(e,r){return Y((0,a.Z)((0,o.Z)({},W()),(0,u.Z)({},e,r)))},z=function(e){var r=W();delete r[e],Y(r)},Q=function(e){return e.ofType(p.EMAIL_SET).pipe((0,h.j)("payload","email"),(0,v.b)(function(e){return q("email",e)}),(0,Z.l)())},J=function(e){return e.pipe((0,L.P)(),(0,U.U)(function(){return V("email")}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.setEmail({email:e})}))},$=function(e,r){return(0,P.T)(e.pipe((0,L.P)()),e.ofType(H.cw.USER_AUTH_UPDATED)).pipe((0,w.h)(function(){return H.py.isAuth(r.value)}),(0,w.h)(function(){return V("email")}),(0,v.b)(function(){return z("email")}),(0,Z.l)())},X=function(e){return e.ofType(p.REFERRER_SET).pipe((0,v.b)(function(e){q("referrer",e.payload.referrer)}),(0,Z.l)())},ee=function(e){return e.ofType(p.REFERRER_TYPE_SET).pipe((0,v.b)(function(e){q("referrerType",e.payload.referrerType)}),(0,Z.l)())},er=function(e){return e.pipe((0,L.P)(),(0,U.U)(function(){return V("referrer")}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.setReferrer({referrer:e})}))},en=function(e){return e.pipe((0,L.P)(),(0,U.U)(function(){return V("referrerType")}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.setReferrerType({referrerType:e})}))},et=function(e){return e.pipe((0,L.P)(),(0,w.h)(function(){return N.bbn}),(0,U.U)(function(){return O().parse(window.location.href,!0).query}),(0,U.U)(function(e){return e.pal||e.ref}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.referrerClick({referrer:e})}))},ei=function(e,r){return e.ofType(p.REFERRER_CLICK).pipe((0,U.U)(function(e){return e.payload}),(0,w.h)(function(e){var r;return"string"==typeof(r=e.referrer)&&r.length<=16&&/^[0-9]+$/.test(r)}),(0,w.h)(function(){return!H.py.isAuth(r.value)}),(0,D.g)(500),(0,w.h)(function(e){return e.referrer!==R.getReferrerRaw(r.value)}),(0,C.w)(function(e){var r=e.referrer,n=e.referrerType;return(0,S.D)((0,B.Z)({method:"POST",uri:"".concat(N.va2,"/referral_clicks"),maxAttempts:4,body:{referrer:r}})).pipe((0,b.zg)(function(){return[s.setReferrer({referrer:r}),s.setReferrerType({referrerType:n}),]}),(0,k.K)(function(e){return j.ZP.error("Save referral click",e),y.E}))}))},eu=function(e){return e.ofType(p.PARTNER_SET).pipe((0,v.b)(function(e){q("partner",e.payload.partner)}),(0,Z.l)())},eo=function(e){return e.pipe((0,L.P)(),(0,U.U)(function(){return V("partner")}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.setPartner({partner:e})}))},ea=function(e,r){return e.ofType(p.PARTNER_CLICK).pipe((0,U.U)(function(e){return e.payload}),(0,w.h)(function(){return!H.py.isAuth(r.value)}),(0,w.h)(function(e){return e.partner!==R.getPartner(r.value)}),(0,D.g)(500),(0,C.w)(function(e){var r=e.partner,n=e.referrerType;return(0,S.D)((0,B.Z)({method:"POST",uri:"".concat(N.va2,"/partner_referral_clicks"),maxAttempts:4,body:{partner:r}})).pipe((0,b.zg)(function(){return[s.setPartner({partner:r}),s.setReferrerType({referrerType:n}),]}),(0,k.K)(function(e){return j.ZP.error("Save partner click",e),y.E}))}))},ec=function(e,r){return(0,P.T)(e.pipe((0,L.P)()),e.ofType(H.cw.USER_AUTH_UPDATED)).pipe((0,w.h)(function(){return!H.py.isAuth(r.value)}),(0,C.w)(function(){return(0,P.T)((0,I.H)(0),(0,A.F)(1e3).pipe((0,F.q)(3)),(0,A.F)(5e3).pipe((0,F.q)(6)))}),(0,U.U)(function(){return M.Z.get("_fprom_track")}),(0,w.h)(function(e){return e}),(0,F.q)(1),(0,w.h)(function(e){return e!==R.getAffiliateTrackingIdRaw(r.value)}),(0,U.U)(function(e){return s.setAffiliateTrackingId({id:e})}))},el=function(e){return e.ofType(p.WAS_BROADCAST_GUEST_SET).pipe((0,h.j)("payload","wasBroadcastGuest"),(0,v.b)(function(e){return e?q("wasBroadcastGuest",e):z("wasBroadcastGuest")}),(0,Z.l)())},ef=function(e){return e.pipe((0,L.P)(),(0,U.U)(function(){return V("wasBroadcastGuest")}),(0,w.h)(function(e){return e}),(0,U.U)(function(e){return s.setWasBroadcastGuest({wasBroadcastGuest:e})}))},ep=function(e,r){return e.pipe((0,L.P)(),(0,w.h)(function(){return!H.py.isAuth(r.value)}),(0,U.U)(function(){return(0,K.pm)("signup_redirect")}),(0,w.h)(function(e){return e&&e.startsWith(N.jQg)}),(0,U.U)(function(e){return s.setPostSignupRedirectUrl({url:e})}))},es=function(e){return e.ofType(p.POST_SIGNUP_REDIRECT_URL_SET).pipe((0,h.j)("payload","url"),(0,v.b)(function(e){return q("postSignupRedirectUrl",e)}),(0,Z.l)())},eE=(0,i.Q0)(Q,J,$,X,er,en,et,ei,ee,eu,eo,ea,ec,el,ef,ep,es),ed=n(50959),eg=function(){var e=(0,ed.useState)(null),r=e[0],n=e[1];return(0,ed.useEffect)(function(){var e=(0,K.Tl)(x.Z.getItem("signup"));n(R.getReferrer({signup:e}))},[]),r};(0,i.oe)(eE),(0,i.fn)("signup",g),(0,i.WI)(s.serviceLoaded())},61004:function(e,r,n){var t=n(22609);r.Z=function(){return{cometlyFingerprint:t.Z.getItem("cometlyFingerprint"),cometlyToken:t.Z.getItem("cometlyToken")}}},90539:function(e,r,n){n.d(r,{Z:function(){return V}});var t=n(11527),i=n(50959),u=n(25941),o=n(80381),a=n(43905),c=n(27941),l=n(37885),f=n(43119),p=n(61258);function s(){var e=(0,f.Z)(["\n	display: flex;\n	flex: 1;\n	flex-direction: column;\n	justify-content: space-between;\n	min-height: 100vh;\n	overflow-x: ",";\n"]);return s=function(){return e},e}function E(){var e=(0,f.Z)(["\n		height: auto;\n	"]);return E=function(){return e},e}function d(){var e=(0,f.Z)(["\n	display: flex;\n	flex: 1;\n	flex-direction: column;\n\n	",";\n"]);return d=function(){return e},e}function g(){var e=(0,f.Z)(["\n		margin-top: 50px;\n	"]);return g=function(){return e},e}function T(){var e=(0,f.Z)(["\n	margin-top: 32px;\n\n	","\n"]);return T=function(){return e},e}function _(){var e=(0,f.Z)(["\n	position: fixed;\n	z-index: 9999;\n	right: 20px;\n	top: 88px;\n"]);return _=function(){return e},e}var m=o.tA.BC,R=p.ZP.div.withConfig({componentId:"sc-63f67783-0"})(s(),function(e){return e.overflowVisible?"visible":"hidden"}),P=p.ZP.div.withConfig({componentId:"sc-63f67783-1"})(d(),m.belowMedium(E())),S=p.ZP.div.withConfig({componentId:"sc-63f67783-2"})(T(),m.medium(g())),y=p.ZP.div.withConfig({componentId:"sc-63f67783-3"})(_()),I=n(47004),A=n.n(I),h=n(98993),v=n(57135),Z=n(72006),L=n(4405),U=n(25862),w=n(80055),D=n(90049),C=n(38959),b=n(96130),k=n(43570),F=n(78807),G=n(61004),O=function(e){var r,n=e.action,t=e.redirectTo,u=(0,i.useState)(),o=u[0],a=u[1],c=(0,h.v9)(F.py.isAuth),l=(0,h.v9)(k.Oh.getAffiliateTrackingId),f=(0,h.v9)(C.F5.getCurrency),p=(0,w.v8)(),s=(0,w.U)(),E=(0,h.v9)(k.Oh.getPartner),d=(0,h.v9)(k.Oh.getReferrer),g=(0,h.v9)(k.Oh.getReferrerType),T=(0,h.v9)(k.Oh.wasBroadcastGuest),_=(0,G.Z)(),m=_.cometlyFingerprint,R=_.cometlyToken;return{onSubmit:(0,i.useCallback)((r=(0,v.Z)(function(e){var r,i,u;return(0,U.__generator)(this,function(o){return r=e.code,i=e.token,c||(u="login"===n?"/login":"signup"===n?"/signup":window.location.pathname,(0,b.Z)({method:"POST",uri:"".concat(D.va2,"/user/google_auth"),timeout:25e3,body:(0,Z.Z)((0,L.Z)((0,Z.Z)({action:n,code:r,token:i},m&&{cometlyFingerprint:m},R&&{cometlyToken:R}),{currency:f,requestLocationType:"google",requestUrl:u}),l&&{affiliateTrackingId:l},!p&&{language:s},E&&{partner:E},d&&{referrer:d},g&&{referrerType:g},T&&{wasBroadcastGuest:T})}).then(function(e){if("redirectUrl"in e){window.location.href=e.redirectUrl;return}window.location.href=t||("login"===e.action?"/broadcasts":"/welcome")}).catch(function(e){if(404===e.statusCode){a("userNotFound");return}a("google")})),[2]})}),function(e){return r.apply(this,arguments)}),[n,l,m,R,f,c,p,s,E,t,d,g,T,]),isAuth:c,apiError:o}},N=n(78289),M=n(35753),x=n(84872),j=n(1964),B=n(46735),H="googleOneTapParent",K=function(e){var r,n=e.hasGoogleGsiScriptLoaded,t=(0,h.v9)(x.h.getPostLoginRedirectUrl),u=O({action:"onetap",redirectTo:(0,h.v9)(k.Oh.getPostSignupRedirectUrl)||t}),o=u.onSubmit,a=u.isAuth,c=(0,i.useCallback)(function(e){M.ZP.track(M.ZP.events.GOOGLE_ONE_TAP_CLICKED),o({token:e.credential})},[o]),l=(0,j.ac)(B.w5.belowMedium),f=D.bbn&&(null==window?void 0:window.location.pathname.startsWith("/cyberweek"));return(0,i.useEffect)(function(){if(n&&N.Z.googleOneTap&&D.bbn&&!l&&!a&&!f){var e,r,t=window;null===(e=t.google)||void 0===e||e.accounts.id.initialize({client_id:D.wLr,callback:c,prompt_parent_id:H}),null===(r=t.google)||void 0===r||r.accounts.id.prompt()}},[n,c,a,f,l,]),{parentId:H}},W=function(){var e=(0,i.useState)(!1),r=e[0],n=e[1],u=K({hasGoogleGsiScriptLoaded:r}).parentId;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A(),{id:"googleGsi",strategy:"afterInteractive",src:"https://accounts.google.com/gsi/client",onLoad:function(){return n(!0)}}),(0,t.jsx)(y,{id:u})]})},Y=n(61054),V=function(e){var r=e.activePage,n=e.children,i=e.featureFlags,f=e.navigation,p=e.overflowVisible,s=e.topPadding,E=e.user;return(0,t.jsx)(a.Z,{i18n:u.ag,user:E,withTheme:!1,children:(0,t.jsx)(o.f6,{themeName:"marketing",isGlobal:!0,children:(0,t.jsxs)(t.Fragment,{children:[i&&!0===i["google-one-tap"]&&(0,t.jsx)(W,{}),(0,t.jsx)(R,{overflowVisible:p,children:(0,t.jsxs)(P,{children:[!(null==E?void 0:E.email)&&(0,t.jsx)(Y.Z,{cyberWeekBannerFeatureFlag:i["cyber-week-banner"],blackFriday2023FeatureFlag:i["black-friday-2023"]}),(0,t.jsx)(l.Z,{activePage:r,header:null==f?void 0:f.header}),(void 0===s||s)&&(0,t.jsx)(S,{}),n]})}),(0,t.jsx)(c.Z,{})]})})})}}}]);
//# sourceMappingURL=539-728fe576b47cb245.js.map